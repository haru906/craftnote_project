<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="craftsoft-notes-api_1-test-suite.xml" />
	<munit:test name="craftsoft-notes-api_1-test-suite-get:\notes:craftsoft-notes-api_1-configTest" doc:id="67a40d78-6e14-4f5e-87f1-c3f6d96f5246" description="Test">
		<munit:execution >
			<flow-ref doc:name="Flow-ref to get:\notes:craftsoft-notes-api_1-config" doc:id="a0505c17-c714-4623-8c9a-bf97b7010fcf" name="get:\notes:craftsoft-notes-api_1-config"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert doc:name="Assert expression" doc:id="f7442403-6bee-41ce-88b0-ea563f211222" >
				<munit-tools:that ><![CDATA[#[import * from dw::test::Asserts 
 ---
payload must beArray()]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="craftsoft-notes-api_1-test-suite-get:\notes\(noteId):craftsoft-notes-api_1-configTest" doc:id="2cf283a8-214e-47ce-a4de-1db8068c3b4b" description="Test">
		<munit:execution >
			<flow-ref doc:name="Flow-ref to get:\notes\(noteId):craftsoft-notes-api_1-config" doc:id="76884a1a-6c7f-46f4-999b-662880e78b37" name="get:\notes\(noteId):craftsoft-notes-api_1-config"/>
		</munit:execution>
		<munit:validation >
			<set-variable value="18" doc:name="Set Variable" doc:id="56f0f5ff-dfb1-4776-9956-2c29f8b1fc28" variableName="noteId"/>
			<munit-tools:assert-that doc:name="Assert that" doc:id="3cd83926-b0b2-4ad3-99d1-5b80eac9ea27" expression="#[payload.id]" is="#[equalTo(18)]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="craftsoft-notes-api_1-test-suite-delete:\notes\(noteId):craftsoft-notes-api_1-configTest" doc:id="31bc5423-0d99-4b15-b8eb-e7ec5417efa7" description="Test">
		<munit:behavior >
			<!-- [STUDIO:"Mock when"]<munit-tools:mock-when doc:name="Mock when" doc:id="901273b3-8315-45dd-82d0-f939cbc58de7" /> [STUDIO] -->
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to delete:\notes\(noteId):craftsoft-notes-api_1-config" doc:id="3f329403-e63a-45d5-aae8-2ae3848eba05" name="delete:\notes\(noteId):craftsoft-notes-api_1-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="00aba1a7-068b-4ae5-841e-728367b8b0ae" actual='#["message":"note deleted successfully."]' expected='#["message":"note deleted successfully."]'/>
		</munit:validation>
	</munit:test>
	<munit:test name="craftsoft-notes-api_1-test-suite-delete:\notes\(noteId):craftsoft-notes-api_1-configTest1" doc:id="cd31db6f-c049-454b-a312-cbe3dc921a26" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="5a330b35-f8b7-49c0-b0e9-110372e9cf4f" processor="db:delete">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="38ec2543-9807-438a-a746-eb97f15dd0ec" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[1]" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="0b2c52f6-6ede-448c-81e0-e58b67b572b9" >
				<munit:payload value='#[{ uriParams: { noteId: "1" } }]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to delete:\notes\(noteId):craftsoft-notes-api_1-config" doc:id="cbc8bb73-8cba-41d5-94b5-565f37f5717f" name="delete:\notes\(noteId):craftsoft-notes-api_1-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="0c813213-551f-4322-9f67-1ec1e44c1e64" expression="#[payload.message]" is='#[MunitTools::equalTo("note deleted successfully")]'/>
			<munit-tools:verify-call doc:name="Verify call" doc:id="6edeaaa3-61d5-48e1-b726-7eab90e963fa" processor="db:delete" atLeast="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="38ec2543-9807-438a-a746-eb97f15dd0ec" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>


</mule>
